<body></body>
<script>

var c = document.createElement('canvas')
document.body.append(c)
var gl = c.getContext('webgl')

var vs = createShader(gl, gl.VERTEX_SHADER, `
attribute vec4 a_position;
void main() {
    gl_Position = a_position;
}
`)

var fs = createShader(gl, gl.FRAGMENT_SHADER, `
precision mediump float;

void main() {
    gl_FragColor = vec4(0.999, 0, 0, 0);
}
`)

var program = createProgram(gl, vs, fs)
var a_position = gl.getAttribLocation(program, 'a_position')
var positionBuffer = gl.createBuffer()

gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer)
gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
    0, 0,
    0, 0.5,
    0.7, 0,
]), gl.STATIC_DRAW)

gl.viewport(0, 0, gl.canvas.width, gl.canvas.height)
gl.clearColor(0, 0, 0, 0)
gl.clear(gl.COLOR_BUFFER_BIT)

gl.useProgram(program)
gl.enableVertexAttribArray(a_position)

gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer)
gl.vertexAttribPointer(a_position, 2, gl.FLOAT, false, 0, 0)

gl.drawArrays(gl.TRIANGLES, 0, 3)






// const targetTextureWidth = 2
// const targetTextureHeight = 2
// const targetTexture = gl.createTexture()
// gl.bindTexture(gl.TEXTURE_2D, targetTexture)
// gl.texImage2D(gl.TEXTURE_2D, 0, gl.R32F, 2, 2, 0, gl.RED, gl.FLOAT, null)

// gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR)
// gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)
// gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)


// const fb = gl.createFramebuffer()
// gl.bindFramebuffer(gl.FRAMEBUFFER, fb)
 
// gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, targetTexture, 0)









function createShader(gl, type, source) {
    var shader = gl.createShader(type)
    gl.shaderSource(shader, source)
    gl.compileShader(shader)
    if (gl.getShaderParameter(shader, gl.COMPILE_STATUS)) return shader
    console.log(gl.getShaderInfoLog(shader))
    gl.deleteShader(shader)
}

function createProgram(gl, vertexShader, fragmentShader) {
    var program = gl.createProgram()
    gl.attachShader(program, vertexShader)
    gl.attachShader(program, fragmentShader)
    gl.linkProgram(program)
    if (gl.getProgramParameter(program, gl.LINK_STATUS)) return program
    console.log(gl.getProgramInfoLog(program))
    gl.deleteProgram(program)
}

</script>
