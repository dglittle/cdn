
<body></body>
<script>

var input = 'print{[hello] + (hi) + [ho] * 9}'

function L_tokenize(s) {
    return s.match(/[a-zA-Z_][a-zA-Z_0-9]*|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?|\'(\\\'|[^\'])*\'|\"(\\\"|[^\"])*\"|\/\/.*|\/\*[\s\S]*?\*\/|[\{\}\[\]\(\)\,\+\-\*\/\=\:]/g)
}

function L_parse(s) {
    var ts = L_tokenize(s)
    var ti = 0
    function helper(accum, delim) {
        if (!accum) accum = []
        var t = null
        while (t = ts[ti]) {
            if (t.match(/[a-zA-Z_][a-zA-Z_0-9]*|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?|\'(\\\'|[^\'])*\'|\"(\\\"|[^\"])*\"/)) {
                accum.push(t)
                ti++
            } else if (t.match(/[\{\(\[]/)) {
                ti++
                accum.push(helper([], t))
                if (!ts[ti].match(/[\}\)\]]/)) throw 'expecting closing thing for ' + t
                ti++
            } else if (t.match(/[\,\+\-\*\/]/)) {
                if (delim && (delim != t)) {
                    if going to higher precidence:
                        accum.push(helper([accum.pop()], t))
                    else
                        break
                }
                delim = t
                ti++
            } else break
        }
        return delim ? [delim, accum] : accum
    }
    return helper()
}
    
console.log(JSON.stringify(L_parse(input), null, '    '))
    
</script>