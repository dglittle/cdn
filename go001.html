<body></body>
<script>

console.log('hi3!')

function createUploadButton() {
    var b = document.createElement('button')
    document.body.append(b)
    b.onclick = function () {
        var inp = document.createElement('input')
        inp.setAttribute('type', 'file')
        inp.onchange = function () {
            if (this.files.length == 1) {
                var r = new FileReader()
                r.onload = function (e) {
                    
                    console.log('got here!!?: ' + r.result)
                    
                    var im = new Image()
                    im.onload = function () {
                        
                        
                        console.log('got here!!??')
                        
                        var c = document.createElement('canvas')
                        c.width = im.width
                        c.height = im.height
                        var g = c.getContext('2d')
                        g.drawImage(im, 0, 0, im.width, im.height)
                        document.body.append(c)
                    }
                    im.src = r.result
                }
                r.readAsText(this.files[0])
            }
            document.body.removeChild(inp)
        }
        inp.style.display = 'none'
        document.body.append(inp)
        inp.click()
    }
}
createUploadButton()

</script>
